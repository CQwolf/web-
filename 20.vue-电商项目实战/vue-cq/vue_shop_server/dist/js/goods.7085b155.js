(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods"],{"02c6":function(t,e,r){},1276:function(t,e,r){"use strict";var a=r("d784"),n=r("44e7"),o=r("825a"),s=r("1d80"),i=r("4840"),c=r("8aa5"),l=r("50c4"),u=r("14c3"),d=r("9263"),m=r("d039"),p=[].push,f=Math.min,g=4294967295,h=!m((function(){return!RegExp(g,"y")}));a("split",2,(function(t,e,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var a=String(s(this)),o=void 0===r?g:r>>>0;if(0===o)return[];if(void 0===t)return[a];if(!n(t))return e.call(a,t,o);var i,c,l,u=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,h=new RegExp(t.source,m+"g");while(i=d.call(h,a)){if(c=h.lastIndex,c>f&&(u.push(a.slice(f,i.index)),i.length>1&&i.index<a.length&&p.apply(u,i.slice(1)),l=i[0].length,f=c,u.length>=o))break;h.lastIndex===i.index&&h.lastIndex++}return f===a.length?!l&&h.test("")||u.push(""):u.push(a.slice(f)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var n=s(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,n,r):a.call(String(n),e,r)},function(t,n){var s=r(a,t,this,n,a!==e);if(s.done)return s.value;var d=o(t),m=String(this),p=i(d,RegExp),b=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),y=new p(h?d:"^(?:"+d.source+")",v),_=void 0===n?g:n>>>0;if(0===_)return[];if(0===m.length)return null===u(y,m)?[m]:[];var x=0,w=0,C=[];while(w<m.length){y.lastIndex=h?w:0;var k,F=u(y,h?m:m.slice(w));if(null===F||(k=f(l(y.lastIndex+(h?0:w)),m.length))===x)w=c(m,w,b);else{if(C.push(m.slice(x,w)),C.length===_)return C;for(var G=1;G<=F.length-1;G++)if(C.push(F[G]),C.length===_)return C;w=x=k}}return C.push(m.slice(x)),C}]}),!h)},"14c3":function(t,e,r){var a=r("c6b6"),n=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var o=r.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"159b":function(t,e,r){var a=r("da84"),n=r("fdbc"),o=r("17c2"),s=r("9112");for(var i in n){var c=a[i],l=c&&c.prototype;if(l&&l.forEach!==o)try{s(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,n=r("a640"),o=r("ae40"),s=n("forEach"),i=o("forEach");t.exports=s&&i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("d3b7");function a(t,e,r,a,n,o,s){try{var i=t[o](s),c=i.value}catch(l){return void r(l)}i.done?e(c):Promise.resolve(c).then(a,n)}function n(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var s=t.apply(e,r);function i(t){a(s,n,o,i,c,"next",t)}function c(t){a(s,n,o,i,c,"throw",t)}i(void 0)}))}}},"399d":function(t,e,r){"use strict";r("53e6")},"3b0d":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("分类参数")])],1),r("el-card",{staticClass:"box-card"},[r("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数",type:"warning","show-icon":""}}),r("el-row",{staticClass:"select-goods"},[r("el-col",[r("span",[t._v("选择商品分类：")]),r("el-cascader",{staticStyle:{width:"25%"},attrs:{options:t.goodsCateList,props:t.cateProps,clearable:"",placeholder:"请选择商品分类"},on:{change:t.handleChange},model:{value:t.selectedCate,callback:function(e){t.selectedCate=e},expression:"selectedCate"}})],1)],1),r("el-row",{staticClass:"select-goods"},[r("el-col",[r("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[r("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",disabled:t.isBtnDisabled},on:{click:t.showAddParamsDialog}},[t._v("添加"+t._s(t.getActiveTabName))]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.manyAttrList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(a,n){return r("el-tag",{key:a,attrs:{closable:""},on:{close:function(r){return t.handleClose(n,e.row)}}},[t._v(" "+t._s(a)+" ")])})),e.row.inputVisible?r("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(r){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(r){t.$set(e.row,"inputValue",r)},expression:"scope.row.inputValue"}}):r("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(r){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"attr_name",label:"名称"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return t.showEditParamsDialog(e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return t.deleteParams(e.row)}}},[t._v("删除")])]}}])})],1)],1),r("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[r("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",disabled:t.isBtnDisabled},on:{click:t.showAddParamsDialog}},[t._v("添加"+t._s(t.getActiveTabName))]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.onlyAttrList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"expand"}}),r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"attr_name",label:"名称"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return t.showEditParamsDialog(e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return t.deleteParams(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)],1)],1)],1),r("el-dialog",{attrs:{title:"添加"+t.getActiveTabName,visible:t.addParamsDialog,width:"30%"},on:{"update:visible":function(e){t.addParamsDialog=e},close:t.resetAddParams}},[r("el-form",{ref:"addParamsForm",attrs:{model:t.addParamsForm,"label-width":"100px",rules:t.addParamsFormRules}},[r("el-form-item",{attrs:{label:t.getActiveTabName+"：",prop:"attr_name"}},[r("el-input",{model:{value:t.addParamsForm.attr_name,callback:function(e){t.$set(t.addParamsForm,"attr_name",e)},expression:"addParamsForm.attr_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.resetAddParams}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addParams}},[t._v("添 加")])],1)],1),r("el-dialog",{attrs:{title:"编辑"+t.getActiveTabName,visible:t.editParamsDialog,width:"30%"},on:{"update:visible":function(e){t.editParamsDialog=e},close:t.resetEditParams}},[r("el-form",{ref:"editParamsForm",attrs:{model:t.editParamsForm,"label-width":"100px",rules:t.editParamsFormRules}},[r("el-form-item",{attrs:{label:t.getActiveTabName+"：",prop:"attr_name"}},[r("el-input",{model:{value:t.editParamsForm.attr_name,callback:function(e){t.$set(t.editParamsForm,"attr_name",e)},expression:"editParamsForm.attr_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.resetEditParams}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.editParams}},[t._v("修 改")])],1)],1)],1)},n=[],o=r("1da1"),s=(r("159b"),r("ac1f"),r("1276"),r("99af"),r("a15b"),r("498a"),r("a434"),r("96cf"),{data:function(){return{goodsCateList:[],cateProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},selectedCate:[],activeName:"many",manyAttrList:[],onlyAttrList:[],addParamsDialog:!1,addParamsForm:{attr_name:"",attr_sel:"many"},addParamsFormRules:{attr_name:[{required:!0,message:"请填写需要添加的参数或属性",trigger:"blur"}]},editParamsDialog:!1,editParamsForm:{attr_name:""},editParamsFormRules:{attr_name:[{required:!0,message:"请填写需要修改的参数或属性",trigger:"blur"}]}}},created:function(){this.getGoodsCateList()},methods:{getGoodsCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类失败"));case 6:t.goodsCateList=a.data;case 7:case"end":return e.stop()}}),e)})))()},getAttrList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(3===t.selectedCate.length){e.next=5;break}return t.selectedCate=[],t.onlyAttrList=[],t.manyAttrList=[],e.abrupt("return",null);case 5:return e.next=7,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:t.activeName}});case 7:if(r=e.sent,a=r.data,200===a.meta.status){e.next=11;break}return e.abrupt("return",t.$message.error("获取商品属性失败"));case 11:a.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.inputVisible=!1,t.inputValue=""})),"many"===t.activeName?t.manyAttrList=a.data:t.onlyAttrList=a.data;case 13:case"end":return e.stop()}}),e)})))()},handleChange:function(){this.getAttrList()},handleClick:function(){this.getAttrList(),this.addParamsForm.attr_sel=this.activeName},showAddParamsDialog:function(){this.addParamsDialog=!0},resetAddParams:function(){this.addParamsDialog=!1,this.$refs.addParamsForm.resetFields()},addParams:function(){var t=this;this.$refs.addParamsForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.$http.post("categories/".concat(t.getCateId,"/attributes"),t.addParamsForm);case 4:if(a=e.sent,n=a.data,201===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("添加"+t.getActiveTabName+"失败"));case 8:t.addParamsDialog=!1,t.$message.success("添加"+t.getActiveTabName+"成功"),t.getAttrList();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},showEditParamsDialog:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("categories/".concat(e.getCateId,"/attributes/").concat(t.attr_id),{params:{attr_sel:e.activeName}});case 2:if(a=r.sent,n=a.data,200===n.meta.status){r.next=6;break}return r.abrupt("return",e.$message.error("根据id查询数据失败"));case 6:e.editParamsForm=n.data,e.editParamsDialog=!0;case 8:case"end":return r.stop()}}),r)})))()},resetEditParams:function(){this.editParamsDialog=!1,this.$refs.editParamsForm.resetFields()},editParams:function(){var t=this;this.$refs.editParamsForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.$http.put("categories/".concat(t.getCateId,"/attributes/").concat(t.editParamsForm.attr_id),{attr_name:t.editParamsForm.attr_name,attr_sel:t.editParamsForm.attr_sel});case 4:if(a=e.sent,n=a.data,200===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("修改"+t.getActiveTabName+"失败"));case 8:t.editParamsDialog=!1,t.$message.success("修改"+t.getActiveTabName+"成功"),t.getAttrList();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteParams:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("此操作将永久删除该属性, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(a=r.sent,"cancel"!==a){r.next=5;break}return r.abrupt("return",null);case 5:return r.next=7,e.$http.delete("categories/".concat(e.getCateId,"/attributes/").concat(t.attr_id));case 7:if(n=r.sent,o=n.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",e.$message.error(o.meta.msg));case 11:e.$message.success("删除属性成功"),e.getAttrList();case 13:case"end":return r.stop()}}),r)})))()},saveToData:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.put("categories/".concat(e.getCateId,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(" ")});case 2:if(a=r.sent,n=a.data,200===n.meta.status){r.next=6;break}return r.abrupt("return",e.$message.error("修改参数项失败"));case 6:e.$message.success("修改参数项成功");case 7:case"end":return r.stop()}}),r)})))()},handleInputConfirm:function(t){if(t.inputVisible=!1,0===t.inputValue.trim().length)return t.inputValue="",null;t.attr_vals.push(t.inputValue),t.inputValue="",this.saveToData(t)},handleClose:function(t,e){e.attr_vals.splice(t,1),this.saveToData(e)},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))}},computed:{isBtnDisabled:function(){return 3!==this.selectedCate.length},getCateId:function(){return 3!==this.selectedCate.length?null:this.selectedCate[this.selectedCate.length-1]},getActiveTabName:function(){return"only"===this.activeName?"静态属性":"动态参数"}}}),i=s,c=(r("7e13"),r("2877")),l=Object(c["a"])(i,a,n,!1,null,"a93e95a4",null);e["default"]=l.exports},"44e7":function(t,e,r){var a=r("861d"),n=r("c6b6"),o=r("b622"),s=o("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},"498a":function(t,e,r){"use strict";var a=r("23e7"),n=r("58a8").trim,o=r("c8d2");a({target:"String",proto:!0,forced:o("trim")},{trim:function(){return n(this)}})},"4f9b":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("添加商品")])],1),r("el-card",{staticClass:"box-card"},[r("el-alert",{attrs:{title:"添加商品",type:"warning",center:"","show-icon":"",closable:!1}}),r("el-steps",{staticStyle:{"margin-top":"20px"},attrs:{active:t.nowStep-0,"finish-status":"success",simple:"","process-status":"finish"}},[r("el-step",{attrs:{title:"基本信息",icon:"el-icon-edit"}}),r("el-step",{attrs:{title:"商品参数",icon:"el-icon-menu"}}),r("el-step",{attrs:{title:"商品属性",icon:"el-icon-menu"}}),r("el-step",{attrs:{title:"商品图片",icon:"el-icon-picture"}}),r("el-step",{attrs:{title:"商品内容",icon:"el-icon-document"}})],1),r("el-form",{ref:"addGoodsForm",attrs:{model:t.addGoodsForm,"label-width":"auto",rules:t.addGoodsFormRules,"label-position":"top"}},[r("el-tabs",{attrs:{"tab-position":"left","before-leave":t.handleTabChange},on:{"tab-click":t.getAttrListById},model:{value:t.nowStep,callback:function(e){t.nowStep=e},expression:"nowStep"}},[r("el-tab-pane",{attrs:{name:"0"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-edit"}),t._v(" 基本信息")]),r("el-form-item",{attrs:{label:"商品名称：",prop:"goods_name"}},[r("el-input",{model:{value:t.addGoodsForm.goods_name,callback:function(e){t.$set(t.addGoodsForm,"goods_name",e)},expression:"addGoodsForm.goods_name"}})],1),r("el-form-item",{attrs:{label:"商品价格：",prop:"goods_price"}},[r("el-input",{model:{value:t.addGoodsForm.goods_price,callback:function(e){t.$set(t.addGoodsForm,"goods_price",t._n(e))},expression:"addGoodsForm.goods_price"}})],1),r("el-form-item",{attrs:{label:"商品数量：",prop:"goods_number"}},[r("el-input",{model:{value:t.addGoodsForm.goods_number,callback:function(e){t.$set(t.addGoodsForm,"goods_number",t._n(e))},expression:"addGoodsForm.goods_number"}})],1),r("el-form-item",{attrs:{label:"商品重量：",prop:"goods_weight"}},[r("el-input",{model:{value:t.addGoodsForm.goods_weight,callback:function(e){t.$set(t.addGoodsForm,"goods_weight",t._n(e))},expression:"addGoodsForm.goods_weight"}})],1),r("el-form-item",{attrs:{label:"商品分类（Tips：只能选择第三级分类）："}},[r("el-cascader",{staticStyle:{width:"25%"},attrs:{options:t.goodsCateList,props:t.cateProps,clearable:"",placeholder:"请选择商品分类"},on:{change:t.handleChange},model:{value:t.addGoodsForm.goods_cat,callback:function(e){t.$set(t.addGoodsForm,"goods_cat",e)},expression:"addGoodsForm.goods_cat"}})],1)],1),r("el-tab-pane",{attrs:{name:"1"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-menu"}),t._v(" 商品参数")]),t._l(t.manyAttrList,(function(e,a){return r("el-form-item",{key:a,attrs:{label:e.attr_name}},[r("el-checkbox-group",{on:{change:t.handleCahange},model:{value:e.manySelectedAttr,callback:function(r){t.$set(e,"manySelectedAttr",r)},expression:"attr.manySelectedAttr"}},t._l(e.attr_vals,(function(e,a){return r("el-checkbox",{key:a,attrs:{label:e,checked:""}},[t._v(t._s(e))])})),1)],1)}))],2),r("el-tab-pane",{attrs:{name:"2"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-menu"}),t._v(" 商品属性")]),t._l(t.onlyAttrList,(function(e,a){return r("el-form-item",{key:a,attrs:{label:e.attr_name}},[r("el-checkbox-group",{on:{change:t.handleCahange},model:{value:e.onlySelectedAttr,callback:function(r){t.$set(e,"onlySelectedAttr",r)},expression:"attr.onlySelectedAttr"}},t._l(e.attr_vals,(function(e,a){return r("el-checkbox",{key:a,attrs:{label:e,checked:""}},[t._v(t._s(e))])})),1)],1)}))],2),r("el-tab-pane",{attrs:{name:"3"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-picture"}),t._v(" 商品图片")]),r("el-upload",{staticClass:"upload-demo",attrs:{action:t.actionUrl,headers:t.headers,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"list-type":"picture",drag:""}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或"),r("em",[t._v("点击上传")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过500kb ")])]),r("el-dialog",{attrs:{title:"图片预览",visible:t.previewImgDialog,width:"60%"},on:{"update:visible":function(e){t.previewImgDialog=e},close:function(e){t.previewImgDialog=!1}}},[r("img",{staticStyle:{width:"100%"},attrs:{src:this.previewImgUrl,alt:"图片预览"}})])],1),r("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-document"}),t._v(" 商品内容")]),r("quill-editor",{model:{value:t.addGoodsForm.goods_introduce,callback:function(e){t.$set(t.addGoodsForm,"goods_introduce",e)},expression:"addGoodsForm.goods_introduce"}}),r("el-button",{staticClass:"add-btn",attrs:{type:"success"},on:{click:t.addGoods}},[t._v("添加")])],1)],1)],1)],1)],1)},n=[],o=r("1da1"),s=(r("498a"),r("159b"),r("ac1f"),r("1276"),r("c740"),r("a434"),r("a15b"),r("96cf"),r("60bb")),i=r.n(s),c={data:function(){return{nowStep:"0",addGoodsForm:{goods_name:"",goods_cat:[],goods_price:0,goods_number:0,goods_weight:0,goods_introduce:"",pics:[],attrs:[]},addGoodsFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入价格",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}],goods_number:[{required:!0,message:"请输入数量",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入重量",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}]},goodsCateList:[],cateProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},manyAttrList:[],onlyAttrList:[],actionUrl:"http://127.0.0.1:8888/api/private/v1/upload",headers:{Authorization:window.sessionStorage.getItem("token")},previewImgUrl:"",previewImgDialog:!1}},created:function(){this.getGoodsCateList()},methods:{getGoodsCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类失败"));case 6:t.goodsCateList=a.data;case 7:case"end":return e.stop()}}),e)})))()},handleChange:function(){if(3!==this.addGoodsForm.goods_cat.length)return this.addGoodsForm.goods_cat=[],null},handleTabChange:function(t,e){if("0"===e){if(3!==this.addGoodsForm.goods_cat.length)return this.$message.error("请选择商品的分类"),!1;if(""===this.addGoodsForm.goods_name.trim())return this.$message.error("请输入商品名称"),!1;if(this.addGoodsForm.goods_price<0)return this.$message.error("请输入正确商品价格"),!1;if(this.addGoodsForm.goods_weight<0)return this.$message.error("请输入正确商品重量"),!1;if(this.addGoodsForm.goods_number<0)return this.$message.error("请输入正确商品数量"),!1}},getAttrListById:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("1"!==t.nowStep||0!==t.manyAttrList.length){e.next=11;break}return e.next=3,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:"many"}});case 3:if(r=e.sent,a=r.data,200===a.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error("获取商品参数失败"));case 7:a.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.manySelectedAttr=[]})),t.manyAttrList=a.data,e.next=20;break;case 11:if("2"!==t.nowStep||0!==t.onlyAttrList.length){e.next=20;break}return e.next=14,t.$http.get("categories/".concat(t.getCateId,"/attributes"),{params:{sel:"only"}});case 14:if(n=e.sent,o=n.data,200===o.meta.status){e.next=18;break}return e.abrupt("return",t.$message.error("获取商品属性失败"));case 18:o.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.onlySelectedAttr=[]})),t.onlyAttrList=o.data;case 20:case"end":return e.stop()}}),e)})))()},handleCahange:function(){},handlePreview:function(t){this.previewImgUrl=t.response.data.url,this.previewImgDialog=!0},handleRemove:function(t){var e=t.response.data.tmp_path,r=this.addGoodsForm.pics.findIndex((function(t){return t.pic===e}));this.addGoodsForm.pics.splice(r,1)},handleSuccess:function(t){this.addGoodsForm.pics.push({pic:t.data.tmp_path})},addGoods:function(){var t=this;this.$refs.addGoodsForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return a=i.a.cloneDeep(t.addGoodsForm),a.goods_cat=a.goods_cat.join(","),t.manyAttrList.forEach((function(t){a.attrs.push({attr_id:t.attr_id,attr_value:t.manySelectedAttr.join(" ")})})),t.onlyAttrList.forEach((function(t){a.attrs.push({attr_id:t.attr_id,attr_value:t.onlySelectedAttr.join(" ")})})),e.next=8,t.$http.post("goods",a);case 8:if(n=e.sent,o=n.data,201===o.meta.status){e.next=12;break}return e.abrupt("return",t.$message.error("添加商品失败"));case 12:t.$message.success("添加商品成功"),t.$router.push("/goods");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},computed:{getCateId:function(){return 3!==this.addGoodsForm.goods_cat.length?null:this.addGoodsForm.goods_cat[this.addGoodsForm.goods_cat.length-1]}}},l=c,u=(r("399d"),r("2877")),d=Object(u["a"])(l,a,n,!1,null,"0d0d62de",null);e["default"]=d.exports},"53e6":function(t,e,r){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var a=r("1d80"),n=r("5899"),o="["+n+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),c=function(t){return function(e){var r=String(a(e));return 1&t&&(r=r.replace(s,"")),2&t&&(r=r.replace(i,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},"7e13":function(t,e,r){"use strict";r("02c6")},"7f6a":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("商品分类")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline"},on:{click:t.showAddGoodsCateDialog}},[t._v("添加分类")])],1)],1),r("tree-table",{staticClass:"tree-table",attrs:{data:t.goodsCateList,columns:t.goodsCateColumn,border:"","show-row-hover":!1,"selection-type":!1,"show-index":"","index-text":"#","expand-type":!1},scopedSlots:t._u([{key:"isOK",fn:function(t){return[!1===t.row.cat_deleted?r("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):r("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"order",fn:function(e){return[0===e.row.cat_level?r("el-tag",{attrs:{size:"mini"}},[t._v("一级")]):1===e.row.cat_level?r("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("二级")]):r("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("三级")])]}},{key:"opt",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return t.showEditGoodsNameDialog(e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return t.deleteGoodsCate(e.row.cat_id)}}},[t._v("删除")])]}}])}),r("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[3,5,10,15],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加分类",visible:t.addCateDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addCateDialogVisible=e},close:t.resetAddGoosCate}},[r("el-form",{ref:"addCateForm",attrs:{model:t.addCateForm,"label-width":"100px",rules:t.addCateFormRules}},[r("el-form-item",{attrs:{label:"分类名称：",prop:"cat_name"}},[r("el-input",{model:{value:t.addCateForm.cat_name,callback:function(e){t.$set(t.addCateForm,"cat_name",e)},expression:"addCateForm.cat_name"}})],1),r("el-form-item",{attrs:{label:"父级分类："}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{options:t.goodsParentCateList,props:t.cateProps,clearable:""},on:{change:t.handleChange},model:{value:t.selectedCate,callback:function(e){t.selectedCate=e},expression:"selectedCate"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.resetAddGoosCate}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.addGoodsCate}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"提示",visible:t.editGoodsNameDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editGoodsNameDialogVisible=e},close:t.reseteditGoosName}},[r("el-form",{ref:"editCateForm",attrs:{model:t.editCateForm,"label-width":"100px",rules:t.editCateFormRules}},[r("el-form-item",{attrs:{label:"分类名称：",prop:"cat_name"}},[r("el-input",{model:{value:t.editCateForm.cat_name,callback:function(e){t.$set(t.editCateForm,"cat_name",e)},expression:"editCateForm.cat_name"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.reseteditGoosName}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.editGoodsCate}},[t._v("确 定")])],1)],1)],1)},n=[],o=r("1da1"),s=(r("96cf"),{data:function(){return{queryInfo:{type:null,pagenum:1,pagesize:3},total:0,goodsCateList:[],goodsCateColumn:[{label:"分类",prop:"cat_name"},{label:"是否有效",prop:"",type:"template",template:"isOK"},{label:"排序",prop:"",type:"template",template:"order"},{label:"操作",prop:"",type:"template",template:"opt"}],addCateDialogVisible:!1,goodsParentCateList:[],addCateForm:{cat_pid:0,cat_name:"",cat_level:0},addCateFormRules:{cat_name:[{required:!0,message:"请填写分类名称",trigger:"blur"}]},selectedCate:[],cateProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children",checkStrictly:"true"},editGoodsNameDialogVisible:!1,editCateForm:{cat_name:""},editCateFormRules:{cat_name:[{required:!0,message:"请输入需要修改的分类名称",trigger:"blur"}]}}},created:function(){this.getGoodsCateList()},methods:{getGoodsCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:t.queryInfo});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("商品分类列表获取错误"));case 6:t.goodsCateList=a.data.result,t.total=a.data.total;case 8:case"end":return e.stop()}}),e)})))()},getParentCateList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:{type:2}});case 2:if(r=e.sent,a=r.data,200===a.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取父级列表失败"));case 6:t.goodsParentCateList=a.data;case 7:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getGoodsCateList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getGoodsCateList()},showAddGoodsCateDialog:function(){this.getParentCateList(),this.addCateDialogVisible=!0},handleChange:function(){if(0===this.selectedCate.length)return this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0,null;this.addCateForm.cat_pid=this.selectedCate[this.selectedCate.length-1],this.addCateForm.cat_level=this.selectedCate.length},resetAddGoosCate:function(){this.$refs.addCateForm.resetFields(),this.selectedCate=[],this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0},addGoodsCate:function(){var t=this;this.$refs.addCateForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.$http.post("categories",t.addCateForm);case 4:if(a=e.sent,n=a.data,201===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("添加商品分类失败"));case 8:t.$message.success("添加商品分类成功"),t.addCateDialogVisible=!1,t.getGoodsCateList();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getGoodsCateInfoById:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("categories/".concat(t));case 2:if(a=r.sent,n=a.data,200===n.meta.status){r.next=6;break}return r.abrupt("return",e.$message.error("查询本次商品分类数据失败"));case 6:e.editCateForm=n.data;case 7:case"end":return r.stop()}}),r)})))()},showEditGoodsNameDialog:function(t){this.getGoodsCateInfoById(t.cat_id),this.editGoodsNameDialogVisible=!0},reseteditGoosName:function(){this.editGoodsNameDialogVisible=!1,this.$refs.editCateForm.resetFields()},editGoodsCate:function(){var t=this;this.$refs.editCateForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,t.$http.put("categories/".concat(t.editCateForm.cat_id),{cat_name:t.editCateForm.cat_name});case 4:if(a=e.sent,n=a.data,200===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("商品分类名称修改失败"));case 8:t.$message.success("商品分类名称修改成功"),t.editGoodsNameDialogVisible=!1,t.getGoodsCateList();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},deleteGoodsCate:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("此操作将永久删除该商品分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(a=r.sent,"cancel"!==a){r.next=5;break}return r.abrupt("return",null);case 5:return r.next=7,e.$http.delete("categories/"+t);case 7:if(n=r.sent,o=n.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",e.$message.error(o.meta.msg));case 11:e.$message.success(o.meta.msg),e.getGoodsCateList();case 13:case"end":return r.stop()}}),r)})))()}}}),i=s,c=(r("e38b"),r("2877")),l=Object(c["a"])(i,a,n,!1,null,"6859dfdf",null);e["default"]=l.exports},"8aa5":function(t,e,r){"use strict";var a=r("6547").charAt;t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},9263:function(t,e,r){"use strict";var a=r("ad6d"),n=r("9f7f"),o=RegExp.prototype.exec,s=String.prototype.replace,i=o,c=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(i=function(t){var e,r,n,i,d=this,m=l&&d.sticky,p=a.call(d),f=d.source,g=0,h=t;return m&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),h=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(f="(?: "+f+")",h=" "+h,g++),r=new RegExp("^(?:"+f+")",p)),u&&(r=new RegExp("^"+f+"$(?!\\s)",p)),c&&(e=d.lastIndex),n=o.call(m?r:d,h),m?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:c&&n&&(d.lastIndex=d.global?n.index+n[0].length:e),u&&n&&n.length>1&&s.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),t.exports=i},"96cf":function(t,e,r){var a=function(t){"use strict";var e,r=Object.prototype,a=r.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(A){c=function(t,e,r){return t[e]=r}}function l(t,e,r,a){var n=e&&e.prototype instanceof h?e:h,o=Object.create(n.prototype),s=new P(a||[]);return o._invoke=F(t,r,s),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(A){return{type:"throw",arg:A}}}t.wrap=l;var d="suspendedStart",m="suspendedYield",p="executing",f="completed",g={};function h(){}function b(){}function v(){}var y={};c(y,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(E([])));x&&x!==r&&a.call(x,o)&&(y=x);var w=v.prototype=h.prototype=Object.create(y);function C(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(n,o,s,i){var c=u(t[n],t,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===typeof d&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,s,i)}),(function(t){r("throw",t,s,i)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,i)}))}i(c.arg)}var n;function o(t,a){function o(){return new e((function(e,n){r(t,a,e,n)}))}return n=n?n.then(o,o):o()}this._invoke=o}function F(t,e,r){var a=d;return function(n,o){if(a===p)throw new Error("Generator is already running");if(a===f){if("throw"===n)throw o;return R()}r.method=n,r.arg=o;while(1){var s=r.delegate;if(s){var i=G(s,r);if(i){if(i===g)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var c=u(t,e,r);if("normal"===c.type){if(a=r.done?f:m,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=f,r.method="throw",r.arg=c.arg)}}}function G(t,r){var a=t.iterator[r.method];if(a===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,G(t,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var n=u(a,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,g;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(t){if(t){var r=t[o];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function r(){while(++n<t.length)if(a.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:R}}function R(){return{value:e,done:!0}}return b.prototype=v,c(w,"constructor",v),c(v,"constructor",b),b.displayName=c(v,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,i,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},C(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,a,n,o){void 0===o&&(o=Promise);var s=new k(l(e,r,a,n),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},C(w),c(w,i,"Generator"),c(w,o,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var a=e.pop();if(a in t)return r.value=a,r.done=!1,r}return r.done=!0,r}},t.values=E,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(a,n){return i.type="throw",i.arg=t,r.next=a,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),$(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var n=a.arg;$(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,a){return this.delegate={iterator:E(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=a}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},"9f7f":function(t,e,r){"use strict";var a=r("d039");function n(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=a((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=a((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,r){"use strict";var a=r("23e7"),n=r("44ad"),o=r("fc6a"),s=r("a640"),i=[].join,c=n!=Object,l=s("join",",");a({target:"Array",proto:!0,forced:c||!l},{join:function(t){return i.call(o(this),void 0===t?",":t)}})},a434:function(t,e,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),s=r("50c4"),i=r("7b0b"),c=r("65f0"),l=r("8418"),u=r("1dde"),d=r("ae40"),m=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!p},{splice:function(t,e){var r,a,u,d,m,p,v=i(this),y=s(v.length),_=n(t,y),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=y-_):(r=x-2,a=g(f(o(e),0),y-_)),y+r-a>h)throw TypeError(b);for(u=c(v,a),d=0;d<a;d++)m=_+d,m in v&&l(u,d,v[m]);if(u.length=a,r<a){for(d=_;d<y-a;d++)m=d+a,p=d+r,m in v?v[p]=v[m]:delete v[p];for(d=y;d>y-a+r;d--)delete v[d-1]}else if(r>a)for(d=y-a;d>_;d--)m=d+a-1,p=d+r-1,m in v?v[p]=v[m]:delete v[p];for(d=0;d<r;d++)v[d+_]=arguments[d+2];return v.length=y-a+r,u}})},a640:function(t,e,r){"use strict";var a=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))}},a95b:function(t,e,r){},ac1f:function(t,e,r){"use strict";var a=r("23e7"),n=r("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c740:function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").findIndex,o=r("44d2"),s=r("ae40"),i="findIndex",c=!0,l=s(i);i in[]&&Array(1)[i]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},c8d2:function(t,e,r){var a=r("d039"),n=r("5899"),o="​᠎";t.exports=function(t){return a((function(){return!!n[t]()||o[t]()!=o||n[t].name!==t}))}},cb38:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("商品管理")]),r("el-breadcrumb-item",[t._v("商品列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入商品名",clearable:""},on:{clear:t.getGoodsList,blur:t.searchGoodsList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchGoodsList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline"},on:{click:t.goTOAddGoods}},[t._v("添加商品")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.goodsList,stripe:"",border:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"goods_price",label:"价格",width:"95px"}}),r("el-table-column",{attrs:{prop:"goods_number",label:"数量",width:"95px"}}),r("el-table-column",{attrs:{prop:"goods_weight",label:"重量",width:"95px"}}),r("el-table-column",{attrs:{label:"添加时间",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("cqDateFormat")(e.row.add_time))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return t.deleteGoods(e.row)}}},[t._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[5,10,20,30],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[],o=r("1da1"),s=(r("96cf"),{data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:5},total:0,goodsList:[],isSearch:!1}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSearch&&(t.queryInfo.pagenum=1,t.isSearch=!1),e.next=3,t.$http.get("goods",{params:t.queryInfo});case 3:if(r=e.sent,a=r.data,200===a.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error("获取商品列表数据失败"));case 7:t.goodsList=a.data.goods,t.total=a.data.total;case 9:case"end":return e.stop()}}),e)})))()},searchGoodsList:function(){this.isSearch=!0,this.getGoodsList()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getGoodsList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getGoodsList()},deleteGoods:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(a=r.sent,"cancel"!==a){r.next=5;break}return r.abrupt("return",null);case 5:return r.next=7,e.$http.delete("goods/"+t.goods_id);case 7:if(n=r.sent,o=n.data,200===o.meta.status){r.next=11;break}return r.abrupt("return",e.$message.error(o.meta.msg));case 11:e.$message.success("删除所选商品成功"),e.getGoodsList();case 13:case"end":return r.stop()}}),r)})))()},goTOAddGoods:function(){this.$router.push("/goods/add")}}}),i=s,c=r("2877"),l=Object(c["a"])(i,a,n,!1,null,"4a5e488c",null);e["default"]=l.exports},d784:function(t,e,r){"use strict";r("ac1f");var a=r("6eeb"),n=r("d039"),o=r("b622"),s=r("9263"),i=r("9112"),c=o("species"),l=!n((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=o("replace"),m=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!n((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,d){var f=o(t),g=!n((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),h=g&&!n((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return e=!0,null},r[f](""),!e}));if(!g||!h||"replace"===t&&(!l||!u||m)||"split"===t&&!p){var b=/./[f],v=r(f,""[t],(function(t,e,r,a,n){return e.exec===s?g&&!n?{done:!0,value:b.call(e,r,a)}:{done:!0,value:t.call(r,e,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:m}),y=v[0],_=v[1];a(String.prototype,t,y),a(RegExp.prototype,f,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}d&&i(RegExp.prototype[f],"sham",!0)}},e38b:function(t,e,r){"use strict";r("a95b")}}]);
//# sourceMappingURL=goods.7085b155.js.map